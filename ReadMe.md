LHS.py，基于LHS生成初始数据集；
LoadData.py，加载txt文件;
LHS_detect.py，检测LHS数据收敛；
msbo_dm.py，贝叶斯优化;
LHS_data.xlsx，LHS数据；
lhs_data.csv，带能量的实验数据。

注意点：
1.促动器维度
2.DM阈值


文章中的优化维度是20维（对应于可变形镜的20个执行器，执行器编号0-19，电压范围[-80V, 80V]）。
LHS步骤使用了360次shots，用于生成初始数据集。
BO步骤本身是基于训练好的随机森林（RF）代理模型进行的离线优化，不直接消耗额外实验射击（其目的是减少实验次数）。但论文中提到，整个多步优化过程（MSBO）只需少于150次实验数据样本即可收敛到最优配置；通过89次模拟试验分析，显示约100-150次射击即可稳定预测最大质子能量（E_p max ≈ 6.44 ± 0.33 MeV）。


模型误差收敛性，当 RMSE 曲线趋于平稳（论文里是 <0.3 MeV 并且继续增加数据不再下降明显），就认为 LHS 样本量够了。


LHS 样本数不用一开始就死定，可以边做边评估模型收敛情况；通常 100–150 发就足够支撑后续 BO 优化。

大约 100–150 发 LHS 样本就足够，不必全跑 360。

贝叶斯优化阶段要打多少发次？

一旦 surrogate 训练好，贝叶斯优化推荐点就可以开始实验。
每次 BO 推荐一个新配置，你就打几发（比如 5–10 发取平均，论文里就是这样处理 shot-to-shot 噪声的）。
论文实验发现：30–50 个 BO 实验点 就能找到接近最优的配置，超过 50 发提升有限。
也就是说，BO 阶段实际需要 30–50 发左右。



LHS 阶段代码：
逐个读取 LHS 样本；
实验人员执行（导入 DM），然后手动输入当前实验能量；
保存到 CSV；
实时训练 surrogate（RF）并画 RMSE 学习曲线；
当 RMSE 稳定时 → 输出提示 “LHS 足够，可以进入 BO 阶段”。

BO 阶段代码：
从 LHS 阶段保存的数据 CSV 读取初始数据；
训练 surrogate；
根据 BO 选择下一个实验点；
实验员执行 + 输入能量；
保存数据 & 更新 surrogate & 画优化曲线；
重复 30–50 次。